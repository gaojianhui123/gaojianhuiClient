<page-header [breadcrumb]="breadcrumb">
  <ng-template #breadcrumb>
    <nz-breadcrumb>
      <!--<nz-breadcrumb-item><a [routerLink]="['/']">医疗管理</a></nz-breadcrumb-item>-->
      <nz-breadcrumb-item><a [routerLink]="['/drug']">药品库</a></nz-breadcrumb-item>
      <nz-breadcrumb-item><a>药品{{title}}</a></nz-breadcrumb-item>
    </nz-breadcrumb>
  </ng-template>
  <div class="breadcrumb">
    <div class="ml-auto">
      <h2>药品{{title}}</h2>
    </div>
  </div>
</page-header>
<nz-card>
  <form nz-form [formGroup]="drugForm">
    <nz-form-item>
      <nz-form-label [nzSpan]="4" nzRequired nzFor="drugName">药品名称</nz-form-label>
      <nz-form-control [nzSpan]="8">
        <nz-select formControlName="drugName" name="drugName" style="width: 100%;" nzPlaceHolder="请选择"
                   [(ngModel)]="drug.drugName"
                   (nzScrollToBottom)="loadMore()" nzAllowClear>
          <nz-option *ngFor="let o of dictionaryPersonnel" [nzValue]="o.id" [nzLabel]="o.dicName"></nz-option>
          <nz-option *ngIf="isLoading" nzDisabled nzCustomContent>
            <i nz-icon type="loading" class="loading-icon"></i> Loading Data...
          </nz-option>
        </nz-select>
        <nz-form-explain *ngIf="drugForm.get('drugName').dirty && drugForm.get('drugName').errors">
          此项为必填项
        </nz-form-explain>
      </nz-form-control>
      <nz-form-label [nzSpan]="4" nzRequired nzFor="rukuTime">入库时间</nz-form-label>
      <nz-form-control [nzSpan]="8">
        <nz-date-picker nz-date formControlName="rukuTime" name="rukuTime" style="width: 100%;"
                        [(ngModel)]="drug.rukuTime">
        </nz-date-picker>
        <nz-form-explain *ngIf="drugForm.get('rukuTime').dirty && drugForm.get('rukuTime').errors">
          此项为必填项
        </nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="4" nzFor="drugTotalCount" nzRequired>药品数量</nz-form-label>
      <nz-form-control [nzSpan]="8">
        <nz-input-number style="width: 100%;" formControlName="drugTotalCount" id="drugTotalCount"
                         name="drugTotalCount" nzPlaceHolder="请输入数量"
                         [(ngModel)]="drug.drugTotalCount">
        </nz-input-number>
        <nz-form-explain *ngIf="drugForm.get('drugTotalCount').dirty && drugForm.get('drugTotalCount').errors">
          此项为必填项
        </nz-form-explain>
      </nz-form-control>
      <nz-form-label [nzSpan]="4" nzFor="unit" nzRequired>单位</nz-form-label>
      <nz-form-control [nzSpan]="8">
        <input nz-input formControlName="unit" name="unit" nzPlaceHolder="请输入单位" style="width: 100%;"
               [(ngModel)]="drug.unit">
        <nz-form-explain *ngIf="drugForm.get('unit').dirty && drugForm.get('unit').errors">
          此项为必填项
        </nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="4" nzFor="price" nzRequired>单价</nz-form-label>
      <nz-form-control [nzSpan]="8">
        <input nz-input formControlName="price" style="width: 100%;" name="price" nzPlaceHolder="请输入单价"
               [(ngModel)]="drug.price">
        <nz-form-explain *ngIf="drugForm.get('price').dirty && drugForm.get('price').errors">
          此项为必填项
        </nz-form-explain>
      </nz-form-control>
      <nz-form-label [nzSpan]="4" nzFor="guige" nzRequired>规格</nz-form-label>
      <nz-form-control [nzSpan]="8">
        <input nz-input formControlName="guige" style="width: 100%;" name="guige" nzPlaceHolder="请输入规格"
               [(ngModel)]="drug.guige">
        <nz-form-explain *ngIf="drugForm.get('guige').dirty && drugForm.get('guige').errors">
          此项为必填项
        </nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="4" nzRequired nzFor="doctor">入库医生</nz-form-label>
      <nz-form-control [nzSpan]="8">
        <input nz-input name="doctor" formControlName="doctor" style="width: 100%;" nzPlaceHolder="请输入入库医生"
               [(ngModel)]="drug.doctor">
        <nz-form-explain *ngIf="drugForm.get('doctor').dirty && drugForm.get('doctor').errors">
          此项为必填项
        </nz-form-explain>
      </nz-form-control>
      <nz-form-label [nzSpan]="4" nzFor="remark">备注</nz-form-label>
      <nz-form-control [nzSpan]="8">
      <textarea nz-input style="width: 100%;" formControlName="remark" name="remark" nzPlaceHolder="请输入备注"
                [(ngModel)]="drug.remark">
      </textarea>
      </nz-form-control>
    </nz-form-item>
    <div nz-row nzType="flex" nzJustify="center">
      <nz-form-item nz-row style="margin-bottom:8px;">
        <nz-form-control>
          <button nz-button nzType="primary" (click)="closed()">关闭</button>
          <button nz-button nzType="primary" (click)="save()">保存</button>
        </nz-form-control>
      </nz-form-item>
    </div>
  </form>
</nz-card>
